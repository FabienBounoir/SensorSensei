\hypertarget{lora_sender_8cpp_source}{}\doxysubsection{lora\+Sender.\+cpp}
\label{lora_sender_8cpp_source}\index{loraSender.cpp@{loraSender.cpp}}
\mbox{\hyperlink{lora_sender_8cpp}{Aller Ã  la documentation de ce fichier.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lora_sender_8h}{loraSender.h}}"{}}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ <LoRa.h>}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <SPI.h>}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00005}\mbox{\hyperlink{lora_sender_8cpp_a2dd443a4430713d325ab86895a4a45eb}{00005}}\ \textcolor{preprocessor}{\#define\ SCK\ 5}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00006}\mbox{\hyperlink{lora_sender_8cpp_a7334c540878c8c4d801fd75ed9fd8063}{00006}}\ \textcolor{preprocessor}{\#define\ MISO\ 19}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00007}\mbox{\hyperlink{lora_sender_8cpp_a5d3f11f2fdf8a7e27b975291e0c2c8cc}{00007}}\ \textcolor{preprocessor}{\#define\ MOSI\ 27}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00008}\mbox{\hyperlink{lora_sender_8cpp_a88f7782e210e61586baf33b93240d905}{00008}}\ \textcolor{preprocessor}{\#define\ SS\ 18}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00009}\mbox{\hyperlink{lora_sender_8cpp_ac5d957e4fd3dc11cd97a54cf9ca057a4}{00009}}\ \textcolor{preprocessor}{\#define\ RST\ 14}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00010}\mbox{\hyperlink{lora_sender_8cpp_a95c9efcc1a55a72bd5cca0bcfcd18a0c}{00010}}\ \textcolor{preprocessor}{\#define\ DIO0\ 26}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00012}00012\ \textcolor{comment}{//\ \#define\ BAND\ 866E6}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00013}\mbox{\hyperlink{lora_sender_8cpp_ab57e5c97e5d788f048284f1175c757b7}{00013}}\ \textcolor{preprocessor}{\#define\ BAND\ 868E6}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00015}\mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{00015}}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ =\ \textcolor{stringliteral}{"{};"{}};}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00016}\mbox{\hyperlink{lora_sender_8cpp_ad99f2e80756ded0c1a6199112db162c5}{00016}}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{lora_sender_8cpp_ad99f2e80756ded0c1a6199112db162c5}{HEADER}}\ =\ \textcolor{stringliteral}{"{}SENSOUNS"{}};}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00034}\mbox{\hyperlink{class_lora_sender_aeffcf7ddfbf9cdf247f42836d670b346}{00034}}\ \mbox{\hyperlink{class_lora_sender_aeffcf7ddfbf9cdf247f42836d670b346}{LoraSender::LoraSender}}()}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00035}00035\ \{}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00036}00036\ \}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00043}\mbox{\hyperlink{class_lora_sender_af294751d94399b045a021f9f79107be9}{00043}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_lora_sender_af294751d94399b045a021f9f79107be9}{LoraSender::begin}}()}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00044}00044\ \{}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00045}00045\ \ \ \textcolor{comment}{//\ LoRa}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00046}00046\ \ \ \textcolor{comment}{//\ SPI\ LoRa\ pins}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00047}00047\ \ \ SPI.begin(\mbox{\hyperlink{lora_sender_8cpp_a2dd443a4430713d325ab86895a4a45eb}{SCK}},\ \mbox{\hyperlink{lora_sender_8cpp_a7334c540878c8c4d801fd75ed9fd8063}{MISO}},\ \mbox{\hyperlink{lora_sender_8cpp_a5d3f11f2fdf8a7e27b975291e0c2c8cc}{MOSI}},\ \mbox{\hyperlink{lora_sender_8cpp_a88f7782e210e61586baf33b93240d905}{SS}});}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00049}00049\ \ \ \textcolor{comment}{//\ setup\ LoRa\ transceiver\ module}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00050}00050\ \ \ LoRa.setPins(\mbox{\hyperlink{lora_sender_8cpp_a88f7782e210e61586baf33b93240d905}{SS}},\ \mbox{\hyperlink{lora_sender_8cpp_ac5d957e4fd3dc11cd97a54cf9ca057a4}{RST}},\ \mbox{\hyperlink{lora_sender_8cpp_a95c9efcc1a55a72bd5cca0bcfcd18a0c}{DIO0}});}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00052}00052\ \ \ \textcolor{keywordflow}{if}\ (!LoRa.begin(\mbox{\hyperlink{lora_sender_8cpp_ab57e5c97e5d788f048284f1175c757b7}{BAND}}))}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00053}00053\ \ \ \{}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00054}00054\ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Starting\ LoRa\ failed!"{}});}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00055}00055\ \ \ \ \ \textcolor{keywordflow}{while}\ (1)}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00056}00056\ \ \ \ \ \ \ ;}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00057}00057\ \ \ \}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00059}00059\ \ \ Serial.println(\textcolor{stringliteral}{"{}LoRa\ Initializing\ OK!"{}});}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00060}00060\ \}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00069}\mbox{\hyperlink{class_lora_sender_a3a086123486441cc18d37c73d1c8338a}{00069}}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{class_lora_sender_a3a086123486441cc18d37c73d1c8338a}{LoraSender::formatBmp280Data}}(\textcolor{keywordtype}{double}\ temperature,\ \textcolor{keywordtype}{double}\ pressure)}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00070}00070\ \{}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00071}00071\ \ \ \textcolor{comment}{//\ Create\ message\ for\ Bmp280}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00072}00072\ \ \ std::string\ message\ =\ std::string(\mbox{\hyperlink{lora_sender_8cpp_ad99f2e80756ded0c1a6199112db162c5}{HEADER}})\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ \textcolor{stringliteral}{"{}DATA"{}}\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ \textcolor{stringliteral}{"{}TEMP"{}}\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ std::to\_string(temperature)\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ \textcolor{stringliteral}{"{}PRESSURE"{}}\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ std::to\_string(pressure);}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00073}00073\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{char}\ *\textcolor{keyword}{>}(message.c\_str());}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00074}00074\ \}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00083}\mbox{\hyperlink{class_lora_sender_aff87a17e475bf8447e1f65d667b36ee3}{00083}}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{class_lora_sender_aff87a17e475bf8447e1f65d667b36ee3}{LoraSender::formatDustSensor}}(\textcolor{keywordtype}{double}\ dust,\ \textcolor{keywordtype}{boolean}\ needHeader\ =\ \textcolor{keyword}{false})}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00084}00084\ \{}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00085}00085\ \ \ \textcolor{comment}{//\ Create\ message\ for\ Dust\ Sensor}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00086}00086\ \ \ std::string\ message\ =\ needHeader\ ?\ std::string(\mbox{\hyperlink{lora_sender_8cpp_ad99f2e80756ded0c1a6199112db162c5}{HEADER}})\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ \textcolor{stringliteral}{"{}DATA"{}}\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ \textcolor{stringliteral}{"{}DUST"{}}\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ std::to\_string(dust)}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ std::string(\mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}})\ +\ \textcolor{stringliteral}{"{}DUST"{}}\ +\ \mbox{\hyperlink{lora_sender_8cpp_acf83573bf44751fa43386e03e29f0d71}{DELIMITER}}\ +\ std::to\_string(dust);}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00088}00088\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{char}\ *\textcolor{keyword}{>}(message.c\_str());}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00089}00089\ \}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00097}\mbox{\hyperlink{class_lora_sender_a6275a5dec2bf194739fe2668d3048e10}{00097}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_lora_sender_a6275a5dec2bf194739fe2668d3048e10}{LoraSender::sendLora}}(\textcolor{keywordtype}{char}\ *message)}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00098}00098\ \{}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00099}00099\ \ \ \textcolor{comment}{//\ Send\ message}}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00100}00100\ \ \ LoRa.beginPacket();}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00101}00101\ \ \ LoRa.print(message);}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00102}00102\ \ \ LoRa.endPacket();}
\DoxyCodeLine{\Hypertarget{lora_sender_8cpp_source_l00103}00103\ \}}

\end{DoxyCode}
